(function(a,u){typeof exports=="object"&&typeof module<"u"?u(exports):typeof define=="function"&&define.amd?define(["exports"],u):(a=typeof globalThis<"u"?globalThis:a||self,u(a.CDWFW={}))})(this,(function(a){"use strict";const u=[];function d(e){const t=u.findIndex(n=>n.name===e.name);if(t>=0){u[t]=e;return}u.push(e)}function z(){return[...u]}const m="[data-cdw-accordion]",B=".cdw-accordion-item",b=".cdw-accordion-trigger",W=".cdw-accordion-panel",c=new WeakMap;let L=0;function w(e){return L+=1,`${e}-${L}`}function T(e){return e instanceof HTMLElement}function v(e,t){return e===null?t:e===""?!0:e==="true"}function q(e,t){return e==="multiple"?"multiple":t}function U(e,t){switch(e){case"plus":case"caret":case"arrow":case"dot":case"chevron":return e;default:return t}}function O(e){if(e==null)return[];if(Array.isArray(e))return e;if(typeof e=="number")return[e];if(typeof e=="string"){const t=e.trim();if(!t)return[];if(t.includes(","))return t.split(",").map(r=>r.trim()).filter(Boolean).map(r=>{const i=Number(r);return Number.isNaN(i)?r:i});const n=Number(t);return Number.isNaN(n)?[t]:[n]}return[]}function $(e,t){const n=q(e.getAttribute("data-mode"),"single"),r=v(e.getAttribute("data-collapsible"),!1),i=v(e.getAttribute("data-animate"),!0),s=U(e.getAttribute("data-icon"),"chevron"),o=O(e.getAttribute("data-default-open"));return{mode:t?.mode??n,collapsible:t?.collapsible??r,defaultOpen:t?.defaultOpen??o,animate:t?.animate??i,icon:t?.icon??s}}function F(e,t){return e.getAttribute("data-cdw-accordion-item")||e.id||String(t)}function f(e,t){if(typeof t=="number")return e.index===t;if(t.startsWith("id:")){const n=t.slice(3);return e.key===n||e.item.id===n}return e.key===t}function y(e,t,n){if(!n){e.style.maxHeight=t?"none":"0px",e.style.opacity=t?"1":"0",e.style.pointerEvents=t?"auto":"none";return}if(t){e.style.maxHeight=`${e.scrollHeight}px`,e.style.opacity="1",e.style.pointerEvents="auto";const r=i=>{i.propertyName==="max-height"&&(e.style.maxHeight!=="0px"&&(e.style.maxHeight="none"),e.removeEventListener("transitionend",r))};e.addEventListener("transitionend",r);return}(e.style.maxHeight==="none"||e.style.maxHeight==="")&&(e.style.maxHeight=`${e.scrollHeight}px`),e.style.opacity="1",e.style.pointerEvents="none",e.getBoundingClientRect(),e.style.maxHeight="0px",e.style.opacity="0"}function A(e,t){e.trigger.setAttribute("aria-expanded",t?"true":"false"),e.panel.setAttribute("aria-hidden",t?"false":"true")}function x(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:{item:n.item,index:n.index,id:n.key}}))}function h(e,t){t.item.classList.contains("is-open")&&(t.item.classList.remove("is-open"),A(t,!1),y(t.panel,!1,e.options.animate),x(e.container,"cdw:accordion:close",t))}function H(e,t){t.disabled||t.item.classList.contains("is-open")||(e.options.mode==="single"&&e.items.forEach(n=>{n!==t&&h(e,n)}),t.item.classList.add("is-open"),A(t,!0),y(t.panel,!0,e.options.animate),x(e.container,"cdw:accordion:open",t))}function E(e,t){if(t.disabled)return;if(t.item.classList.contains("is-open")){if(e.options.mode==="single"&&!e.options.collapsible)return;h(e,t);return}H(e,t)}function K(e){return Array.from(e.querySelectorAll(B)).map((n,r)=>{const i=n.querySelector(b),s=n.querySelector(W);if(!i||!s)return null;i.id||(i.id=w("cdw-accordion-trigger")),s.id||(s.id=w("cdw-accordion-panel")),i.setAttribute("aria-controls",s.id),i.tagName==="BUTTON"&&!i.getAttribute("type")&&i.setAttribute("type","button"),s.setAttribute("role","region"),s.setAttribute("aria-labelledby",i.id);const o=n.classList.contains("is-disabled")||n.getAttribute("data-disabled")==="true"||i.hasAttribute("disabled")||i.getAttribute("aria-disabled")==="true";return o?(n.classList.add("is-disabled"),i.setAttribute("aria-disabled","true"),i.tagName==="BUTTON"&&i.setAttribute("disabled","true"),i.tagName!=="BUTTON"&&i.setAttribute("tabindex","-1")):(n.classList.remove("is-disabled"),i.removeAttribute("aria-disabled"),i.tagName!=="BUTTON"&&i.setAttribute("tabindex","0")),{item:n,trigger:i,panel:s,index:r,key:F(n,r),disabled:o}}).filter(n=>n!==null)}function j(e){const t=O(e.options.defaultOpen),n=t.length>0;let r=0;e.items.forEach(i=>{const s=n?t.some(l=>f(i,l)):i.item.classList.contains("is-open");e.options.mode==="single"&&r>0&&s&&i.item.classList.remove("is-open");const o=s&&!i.disabled;o?(i.item.classList.add("is-open"),r+=1):i.item.classList.remove("is-open"),A(i,o),y(i.panel,o,e.options.animate)})}function P(e,t){const n=t.target;if(!(n instanceof Element))return;const r=n.closest(b);if(!r||!e.triggerMap.has(r)||r.getAttribute("aria-disabled")==="true"||r.hasAttribute("disabled"))return;const i=e.triggerMap.get(r);i&&E(e,i)}function V(e,t){const n=t.target;if(!(n instanceof Element))return;const r=n.closest(b);if(!r||!e.triggerMap.has(r))return;const i=e.items.filter(l=>!l.disabled).map(l=>l.trigger),s=i.indexOf(r);if(s===-1)return;const o=l=>{const D=i[l];D&&D.focus()};switch(t.key){case"Enter":case" ":case"Spacebar":t.preventDefault(),E(e,e.triggerMap.get(r));break;case"ArrowDown":t.preventDefault(),o((s+1)%i.length);break;case"ArrowUp":t.preventDefault(),o((s-1+i.length)%i.length);break;case"Home":t.preventDefault(),o(0);break;case"End":t.preventDefault(),o(i.length-1);break}}function G(e){e.options.animate&&e.items.forEach(t=>{t.item.classList.contains("is-open")&&(t.panel.style.maxHeight=`${t.panel.scrollHeight}px`)})}function g(e,t){c.has(e)&&S(e);const n=$(e,t);e.setAttribute("data-icon",n.icon),e.setAttribute("data-animate",n.animate?"true":"false");const r=K(e),i=new Map;r.forEach(o=>i.set(o.trigger,o));const s={container:e,options:n,items:r,triggerMap:i,clickHandler:o=>P(s,o),keyHandler:o=>V(s,o),resizeHandler:()=>G(s)};e.addEventListener("click",s.clickHandler),e.addEventListener("keydown",s.keyHandler),window.addEventListener("resize",s.resizeHandler),j(s),c.set(e,s)}function p(e){return typeof e=="string"?document.querySelector(e):e}function Z(e){const t=Array.from(e.querySelectorAll(m)).filter(T);return T(e)&&e.matches(m)&&t.unshift(e),t}const J={init(e,t){Z(e??document).forEach(i=>g(i,t))},open(e,t){const n=p(e);if(!n)return;c.has(n)||g(n);const r=c.get(n);if(!r)return;const i=r.items.find(s=>f(s,t));i&&H(r,i)},close(e,t){const n=p(e);if(!n)return;const r=c.get(n);if(!r)return;const i=r.items.find(s=>f(s,t));i&&h(r,i)},toggle(e,t){const n=p(e);if(!n)return;c.has(n)||g(n);const r=c.get(n);if(!r)return;const i=r.items.find(s=>f(s,t));i&&E(r,i)},destroy(e){const t=p(e);t&&S(t)}};function S(e){const t=c.get(e);t&&(e.removeEventListener("click",t.clickHandler),e.removeEventListener("keydown",t.keyHandler),window.removeEventListener("resize",t.resizeHandler),t.items.forEach(n=>{n.item.classList.remove("is-open"),n.trigger.removeAttribute("aria-expanded"),n.trigger.removeAttribute("aria-controls"),n.panel.removeAttribute("aria-hidden"),n.panel.removeAttribute("aria-labelledby"),n.panel.removeAttribute("role"),n.panel.style.maxHeight="",n.panel.style.opacity="",n.panel.style.pointerEvents=""}),c.delete(e))}function Q(){d({name:"accordion",selector:m,init:(e,t)=>{g(e)}})}Q();const X=".cdw-alert",Y=".cdw-alert-close",ee="data-autoclose";function te(e){if(!e)return null;const t=Number.parseInt(e,10);return Number.isFinite(t)&&t>0?t:null}function N(e){e.classList.contains("is-hiding")||(e.classList.add("is-hiding"),window.setTimeout(()=>{e.remove()},200))}function ne(e){const t=e.querySelector(Y);t&&t.addEventListener("click",()=>N(e));const n=te(e.getAttribute(ee));n&&window.setTimeout(()=>N(e),n)}function ie(){d({name:"alert",selector:X,init:(e,t)=>{ne(e)}})}ie();const I="0.1.0",k="data-cdw-fw-initialized";function re(e){return e??document}function C(e){const t=e.getAttribute(k);return t?new Set(t.split(" ").filter(Boolean)):new Set}function se(e,t){const n=C(e);n.has(t)||(n.add(t),e.setAttribute(k,Array.from(n).join(" ")))}function oe(e,t){return!C(e).has(t)}function ae(e,t){const n=Array.from(e.querySelectorAll(t));return e instanceof HTMLElement&&e.matches(t)&&n.unshift(e),n}function R(e){const t=re(e),n=z();for(const r of n){const i=ae(t,r.selector);for(const s of i)if(oe(s,r.name))try{r.init(s,M),se(s,r.name)}catch(o){console.warn(`cdw-fw init issue: ${r.name}`,o)}}}function _(e){return R(e),M}const M={version:I,init:_,register:d,scan:R};a.Accordion=J,a.CDW_FW_VERSION=I,a.init=_,a.register=d,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})}));
